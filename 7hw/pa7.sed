:A;tA;N;s,\n,&,2;s/leagues[\n\t\r ][\n\t\r ]*beneath/{&}/g;s/\([{}]\)\1/\1/g;s/\({[^}\n]*\)\n/\1|\n/g;:Y;s/\(|\n[^}|\n]*\)\n/\1|\n/;tY;:B;/[{|]/{P;s/[^\n]*\n//};tB;bA